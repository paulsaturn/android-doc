
关机：
In frameworks/base/services/java/com/android/server/BatteryService.java

  Intent intent = new Intent(Intent.ACTION_REQUEST_SHUTDOWN);
  intent.putExtra(Intent.EXTRA_KEY_CONFIRM, false);
  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  mContext.startActivity(intent);

重启：
  Intent intent = new Intent(Intent.ACTION_REBOOT);
  intent.putExtra("nowait", 1);
  intent.putExtra("interval", 1);
  intent.putExtra("window", 0);
  sendBroadcast(i); 

增加关机菜单：
  private static final int MENU_POWER_OFF = MENU_SYSTEM_SETTINGS + 1;

  Intent poweroff = new Intent(Intent.ACTION_REQUEST_SHUTDOWN);
  poweroff.putExtra(Intent.EXTRA_KEY_CONFIRM, false);
  poweroff.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        menu.add(0, MENU_POWER_OFF, 0, R.string.power_off)
            .setIntent(poweroff)


 Intent intent = new Intent("android.intent.action.ACTION_REQUEST_SHUTDOWN");
// 源码中"android.intent.action.ACTION_REQUEST_SHUTDOWN“ 就是 Intent.ACTION_REQUEST_SHUTDOWN方法
  intent.putExtra("android.intent.extra.KEY_CONFIRM", false);
// 源码中"android.intent.extra.KEY_CONFIRM"就是 Intent.EXTRA_KEY_CONFIRM方法
  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  startActivity(intent);


注意添加权限。
<uses-permission android:name="android.permission.SHUTDOWN"/> 
